<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Adaptive Urban Planning Quiz</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        margin: 20px;
      }
      #quiz-container {
        max-width: 600px;
        margin: auto;
        padding: 20px;
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
      }
      .question {
        font-size: 1.2em;
        margin-bottom: 10px;
      }
      button.option {
        display: block;
        width: 100%;
        padding: 10px;
        margin: 5px 0;
        background: #0079c1;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      button.option:hover {
        background: #005f98;
      }
      #result-container {
        text-align: center;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <div id="quiz-container">
      <div id="question-container" class="question"></div>
      <div id="options-container"></div>
    </div>
    <div id="result-container" style="display: none;">
      <h2>Your Recommended Module: <span id="module-name"></span></h2>
      <p id="module-description"></p>
    </div>
    <script>
      // Define quiz data with adaptive branching
      // Each question has an "id", a "question" string, and an "options" array.
      // The "options" each hold a "text", a weight (score) and a "next" question id.
      const quizData = [
        {
          id: "q1",
          question: "How familiar are you with data visualization for urban planning?",
          options: [
            { text: "I have no experience", weight: 1, next: "q2" },
            { text: "I have seen examples but never created visuals", weight: 2, next: "q2" },
            { text: "I can create basic visuals", weight: 3, next: "q2" },
            { text: "I'm very skilled with various visualization tools", weight: 4, next: "q2" }
          ]
        },
        {
          id: "q2",
          question: "How experienced are you with urban data analysis?",
          options: [
            { text: "None", weight: 1, next: "q3" },
            { text: "I have some experience with public records", weight: 2, next: "q3" },
            { text: "I have used urban datasets in projects", weight: 3, next: "q3" },
            { text: "I routinely analyze diverse urban datasets", weight: 4, next: "q3" }
          ]
        },
        {
          id: "q3",
          question: "How comfortable are you with applying AI in urban planning?",
          options: [
            { text: "I have no experience with AI", weight: 1, next: null },
            { text: "I have watched beginner videos on AI", weight: 2, next: null },
            { text: "I have experimented with pre-trained AI models", weight: 3, next: null },
            { text: "I have implemented AI analytics in projects", weight: 4, next: null }
          ]
        }
      ];
      
      let currentQuestionId = "q1";
      let cumulativeScore = 0;
      
      // Render the current question based on its id.
      function renderQuestion(questionId) {
        const questionObj = quizData.find(q => q.id === questionId);
        if (!questionObj) {
          // No more questions; show the result.
          showResults();
          return;
        }
        document.getElementById("question-container").textContent = questionObj.question;
        const optionsContainer = document.getElementById("options-container");
        optionsContainer.innerHTML = ""; // Clear previous options
        
        questionObj.options.forEach(option => {
          const btn = document.createElement("button");
          btn.className = "option";
          btn.textContent = option.text;
          btn.onclick = () => {
            cumulativeScore += option.weight;
            if (option.next) {
              currentQuestionId = option.next;
              renderQuestion(currentQuestionId);
            } else {
              showResults();
            }
          };
          optionsContainer.appendChild(btn);
        });
      }
      
      // Calculate results and display the appropriate module recommendation.
      function showResults() {
        document.getElementById("quiz-container").style.display = "none";
        document.getElementById("result-container").style.display = "block";
        // In this example we have 3 questions; max possible score is 3 * 4 = 12.
        const maxScore = 12; 
        let result = { module: "", description: "" };
        
        if (cumulativeScore < maxScore * 0.30) {
          result = {
            module: "Foundations",
            description: "Start with the core skills of data visualization and introductory AI in urban planning."
          };
        } else if (cumulativeScore < maxScore * 0.50) {
          result = {
            module: "Applications",
            description: "Explore practical tools using thematic maps, ArcGIS StoryMaps, and more."
          };
        } else if (cumulativeScore < maxScore * 0.70) {
          result = {
            module: "Mastery",
            description: "Deepen your knowledge with advanced analytics, interactive dashboards, and data insights."
          };
        } else if (cumulativeScore < maxScore * 0.85) {
          result = {
            module: "Innovation",
            description: "Push boundaries with custom visualizations and cutting-edge AI techniques."
          };
        } else if (cumulativeScore < maxScore) {
          result = {
            module: "Leadership",
            description: "Leverage your skills to lead strategic urban planning initiatives."
          };
        } else {
          result = {
            module: "Transformation",
            description: "Embrace future trends in urban planning with visionary approaches."
          };
        }
        
        document.getElementById("module-name").textContent = result.module;
        document.getElementById("module-description").textContent = result.description;
      }
      
      // Start the quiz by rendering the first question.
      renderQuestion(currentQuestionId);
    </script>
  </body>
</html>
